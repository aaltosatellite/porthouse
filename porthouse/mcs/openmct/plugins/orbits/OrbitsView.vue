
<template>
    <div ref="orbits" class="orbits">

        <div class="pass-info">
            <div class="ads">
                <span>{{ sat.name }}</span>
                <span>{{ sat.aos }} in 12 minutes 34</span>
                <span>{{ sat.los }} in 12 minutes 34</span>
                <span>{{ sat.az }} </span>
            </div>
            <table>
                <tr>
                    <th>Satellite</th>
                    <th>Az</th>
                    <th>El</th>
                    <th>Range</th>
                    <th>AOS</th>
                    <th>LOS</th>
                </tr>
                <template v-for="sat in satellites">
                    <tr>
                        <td>{{ sat.name }}</td>
                        <td>123.4°</td>
                        <td>-21.2°</td>
                        <td>4321 km</td>
                        <td>23 minutes 2 seconds</td>
                        <td>4 minutes 2 seconds</td>
                    </tr>
                </template>
            </table>
        </div>

        <svg id="map" width="100%" height="100%" viewBox="-180 -90 360 180">
            <image x="-180" y="-90" width="360" height="180" href="https://eoimages.gsfc.nasa.gov/images/imagerecords/73000/73776/world.topo.bathy.200408.3x5400x2700.jpg"></image>
            <path class="grid" d="M -180 -60 V 180 M -180 -30 H 180 M -180 -0 H 180 M -180 +30 H 180 M -180 +60 H 180 M -150 -90 V 90  M -120 -90 V 90 M -90 -90 V 90 M -60 -90 V 90 M -30 -90 V 90 M +0 -90 V 90 M +30 -90 V 90 M +60 -90 V 90 M +90 -90 V 90 M +120 -90 V 90 M +150 -90 V 90" />
            <polyline class="shadow" points="-180,90,-180,-28.78692712013037,-179,-31.17275776091788,-178,-33.436857224726516,-177,-35.581095612386065,-176,-37.608559573902575,-175,-39.52324445619292,-174,-41.3297857212946,-173,-43.03323279980892,-172,-44.638864580334754,-171,-46.152043257518855,-170,-47.57810194920282,-169,-48.92226101689042,-168,-50.189568095712254,-167,-51.38485723491514,-166,-52.51272310523699,-165,-53.57750683674368,-164,-54.5832906429164,-163,-55.533898927027174,-162,-56.432904038338,-161,-57.28363524429131,-160,-58.08918981387547,-159,-58.8524453737952,-158,-59.57607291149163,-157,-60.2625499661439,-156,-60.91417367864597,-155,-61.5330734713514,-154,-62.12122320422612,-153,-62.680452711027655,-152,-63.21245866138597,-151,-63.718814725534955,-150,-64.20098104058839,-149,-64.66031299275853,-148,-65.09806934041303,-147,-65.51541970962214,-146,-65.9134514978392,-145,-66.29317622333046,-144,-66.6555353584934,-143,-67.00140568470681,-142,-67.33160420516394,-141,-67.64689265049131,-140,-67.94798161003102,-139,-68.2355343195897,-138,-68.51017013432839,-137,-68.77246771335024,-136,-69.022967940481,-135,-69.2621766037623,-134,-69.4905668543079,-133,-69.70858146341796,-132,-69.91663489521243,-131,-70.11511521053008,-130,-70.30438581644307,-129,-70.48478707445322,-128,-70.65663777925968,-127,-70.82023651891133,-126,-70.97586292617623,-125,-71.12377883006226,-124,-71.26422931560992,-123,-71.397443699334,-122,-71.52363642701552,-121,-71.64300789993005,-120,-71.75574523504017,-119,-71.86202296416934,-118,-71.96200367671211,-117,-72.05583861001209,-116,-72.14366819115517,-115,-72.22562253357258,-114,-72.30182189152794,-113,-72.3723770752678,-112,-72.43738982934566,-111,-72.49695317638073,-110,-72.55115172828562,-109,-72.60006196678529,-108,-72.64375249485427,-107,-72.6822842605183,-106,-72.7157107542965,-105,-72.74407818140153,-104,-72.76742560966615,-103,-72.78578509402266,-102,-72.79918177822711,-101,-72.80763397439192,-100,-72.81115322076455,-99,-72.80974431807087,-98,-72.80340534462212,-97,-72.79212765026897,-96,-72.77589582916852,-95,-72.75468767121582,-94,-72.72847409187258,-93,-72.69721904000669,-92,-72.66087938323302,-91,-72.61940477011991,-90,-72.57273746849255,-89,-72.52081217892699,-88,-72.4635558223818,-87,-72.40088730076104,-86,-72.33271722903562,-85,-72.25894763737611,-84,-72.17947164155962,-83,-72.09417307970892,-82,-72.00292611320292,-81,-71.9055947893568,-80,-71.80203256321079,-79,-71.69208177548293,-78,-71.5755730834317,-77,-71.45232484103607,-76,-71.32214242453057,-75,-71.18481749892612,-74,-71.04012722070297,-73,-70.88783337137247,-72,-70.72768141606672,-71,-70.55939948072589,-70,-70.38269724080288,-69,-70.1972647136921,-68,-70.00277094630533,-67,-69.79886258835785,-66,-69.58516234098151,-65,-69.36126726924903,-64,-69.12674696605912,-63,-68.88114155359571,-62,-68.62395950722761,-61,-68.3546752852494,-60,-68.07272674628449,-59,-67.77751233446486,-58,-67.46838801068236,-57,-67.1446639062742,-56,-66.80560067347719,-55,-66.45040550488775,-54,-66.07822779203379,-53,-65.68815439105671,-52,-65.27920446149993,-51,-64.85032384241394,-50,-64.40037892857626,-49,-63.92815000879438,-48,-63.43232402830344,-47,-62.91148673855958,-46,-62.364114200777955,-45,-61.788563615031876,-44,-61.18306345548782,-43,-60.545702905535926,-42,-59.874420605649654,-41,-59.166992753654846,-40,-58.42102063410589,-39,-57.6339177036838,-38,-56.80289642673332,-37,-55.924955143913536,-36,-54.996865373109415,-35,-54.01516009195755,-34,-52.976123743304065,-33,-51.87578494714522,-32,-50.70991320383538,-31,-49.47402124148826,-30,-48.16337510076677,-29,-46.77301456224197,-28,-45.297787094611806,-27,-43.732399109056686,-26,-42.07148889313549,-25,-40.309726077674334,-24,-38.441942724097636,-23,-36.46330090989284,-22,-34.36950077438507,-21,-32.1570310495614,-20,-29.82346080797193,-19,-27.367766238558,-18,-24.790679626727886,-17,-22.09503964582376,-16,-19.286113396241344,-15,-16.37185287551211,-14,-13.363043893676346,-13,-10.273306339304469,-12,-7.118913247792722,-11,-3.9184130987641486,-10,-0.6920637608354125,-9,2.5388863985249364,-8,5.753010269817185,-7,8.929530847350309,-6,12.049088403736238,-5,15.094377890402118,-4,18.050609886386717,-3,20.90577514693005,-2,23.650718738570315,-1,26.279050047518314,0,28.786927120130347,1,31.172757760917893,2,33.43685722472656,3,35.58109561238602,4,37.60855957390253,5,39.5232444561929,6,41.32978572129461,7,43.03323279980896,8,44.63886458033472,9,46.152043257518834,10,47.57810194920282,11,48.92226101689045,12,50.18956809571223,13,51.384857234915124,14,52.51272310523698,15,53.57750683674368,16,54.583290642916424,17,55.53389892702715,18,56.432904038338,19,57.28363524429131,20,58.089189813875485,21,58.85244537379521,22,59.576072911491615,23,60.26254996614389,24,60.91417367864597,25,61.5330734713514,26,62.12122320422612,27,62.680452711027655,28,63.21245866138597,29,63.718814725534976,30,64.20098104058839,31,64.6603129927585,32,65.09806934041302,33,65.51541970962215,34,65.9134514978392,35,66.29317622333046,36,66.65553535849338,37,67.0014056847068,38,67.33160420516394,39,67.64689265049131,40,67.94798161003102,41,68.2355343195897,42,68.51017013432839,43,68.77246771335022,44,69.022967940481,45,69.26217660376227,46,69.4905668543079,47,69.70858146341793,48,69.91663489521243,49,70.11511521053009,50,70.30438581644307,51,70.48478707445325,52,70.65663777925968,53,70.82023651891133,54,70.97586292617623,55,71.12377883006226,56,71.2642293156099,57,71.397443699334,58,71.52363642701552,59,71.64300789993005,60,71.75574523504017,61,71.86202296416934,62,71.96200367671211,63,72.05583861001209,64,72.1436681911552,65,72.22562253357258,66,72.30182189152794,67,72.3723770752678,68,72.43738982934566,69,72.49695317638071,70,72.55115172828562,71,72.60006196678529,72,72.64375249485425,73,72.6822842605183,74,72.7157107542965,75,72.74407818140153,76,72.76742560966615,77,72.78578509402266,78,72.79918177822711,79,72.80763397439192,80,72.81115322076457,81,72.80974431807087,82,72.80340534462212,83,72.79212765026897,84,72.77589582916852,85,72.7546876712158,86,72.72847409187258,87,72.69721904000669,88,72.66087938323302,89,72.61940477011991,90,72.57273746849255,91,72.52081217892699,92,72.4635558223818,93,72.40088730076104,94,72.33271722903562,95,72.25894763737611,96,72.17947164155962,97,72.09417307970892,98,72.00292611320292,99,71.9055947893568,100,71.80203256321079,101,71.69208177548293,102,71.5755730834317,103,71.45232484103607,104,71.32214242453057,105,71.18481749892612,106,71.04012722070297,107,70.88783337137247,108,70.72768141606672,109,70.55939948072589,110,70.3826972408029,111,70.1972647136921,112,70.00277094630535,113,69.79886258835785,114,69.58516234098151,115,69.36126726924903,116,69.12674696605909,117,68.88114155359575,118,68.62395950722761,119,68.3546752852494,120,68.07272674628449,121,67.77751233446486,122,67.46838801068236,123,67.14466390627422,124,66.80560067347719,125,66.45040550488775,126,66.07822779203379,127,65.68815439105671,128,65.27920446149993,129,64.85032384241394,130,64.40037892857626,131,63.92815000879438,132,63.43232402830344,133,62.91148673855958,134,62.364114200777955,135,61.78856361503189,136,61.183063455487805,137,60.545702905535926,138,59.874420605649654,139,59.166992753654846,140,58.42102063410589,141,57.633917703683814,142,56.80289642673332,143,55.924955143913536,144,54.996865373109415,145,54.01516009195756,146,52.97612374330407,147,51.87578494714522,148,50.70991320383538,149,49.47402124148826,150,48.16337510076681,151,46.77301456224199,152,45.297787094611806,153,43.7323991090567,154,42.07148889313547,155,40.309726077674355,156,38.441942724097636,157,36.46330090989284,158,34.36950077438505,159,32.157031049561404,160,29.823460807971955,161,27.36776623855802,162,24.790679626727904,163,22.09503964582378,164,19.28611339624136,165,16.371852875512097,166,13.363043893676325,167,10.273306339304451,168,7.118913247792738,169,3.91841309876417,170,0.6920637608354341,171,-2.5388863985249204,172,-5.753010269817163,173,-8.929530847350287,174,-12.049088403736254,175,-15.094377890402132,176,-18.050609886386734,177,-20.905775146930036,178,-23.65071873857029,179,-26.279050047518293,180,-28.786927120130336,180,90"></polyline>
            <polyline class="track" points="-180,-71.62028611104886,-175,-74.45437735217999,-170,-76.72182582487883,-165,-78.40537487714533,-160,-79.492211684137,-155,-79.97406476150265,-150,-79.84726691637266,-145,-79.11278315691112,-140,-77.77620334802096,-135,-75.84769966909677,-130,-73.34194919759753,-125,-70.27802220762484,-120,-66.67923703362212,-115,-62.57298260376939,-110,-57.990509993702084,-105,-52.966694586955406,-100,-47.53977065223737,-95,-41.75104035755747,-90,-35.64455943578911,-85,-29.266801893940972,-80,-22.66630631790178,-75,-15.893306464493415,-70,-8.999348952249417,-65,-2.036900960523351,-60,4.941049077426742,-55,11.881394748410596,-50,18.731315831176754,-45,25.43868029018993,-40,31.95244103189963,-35,38.223024403945175,-30,44.202707480583555,-25,49.84598126297016,-20,55.10989703011917,-15,59.954393204603356,-10,64.34260024534811,-5,68.2411212471015,0,71.62028611104886,5,74.45437735217999,10,76.72182582487883,15,78.40537487714533,20,79.492211684137,25,79.97406476150265,30,79.84726691637266,35,79.11278315691112,40,77.77620334802096,45,75.84769966909677,50,73.34194919759754,55,70.27802220762486,60,66.67923703362213,65,62.572982603769404,70,57.99050999370209,75,52.96669458695539,80,47.539770652237365,85,41.75104035755747,90,35.64455943578912,95,29.266801893940983,100,22.666306317901803,105,15.893306464493408,110,8.999348952249427,115,2.036900960523361,120,-4.941049077426715,125,-11.881394748410605,130,-18.731315831176754,135,-25.438680290189918,140,-31.95244103189961,145,-38.22302440394519,150,-44.202707480583555,155,-49.845981262970156,160,-55.109897030119164,165,-59.95439320460334,170,-64.34260024534811,175,-68.2411212471015,180,-71.62028611104884"></polyline>
            <path class="footprint" d="M 130 6.9651336769071115 L 130.4368056653146 6.961523652757519 L 130.8734835077126 6.950694846504673 L 131.30990580835524 6.9326510552502745 L 131.74594505623634 6.907398602548513 L 132.18147405129142 6.8749463310009675 L 132.6163660065436 6.835305591924958 L 133.05049464897226 6.788490232130846 L 133.48373431879713 6.734516577853062 L 133.91596006687945 6.673403415889735 L 134.3470477499496 6.605171972014358 L 134.77687412338312 6.529845886732259 L 135.20531693125756 6.447451188462697 L 135.63225499343747 6.358016264235643 L 136.05756828944763 6.261571827999581 L 136.48113803891124 6.158150886643794 L 136.90284677834498 6.047788703844947 L 137.32257843412071 5.930522761853632 L 137.74021839142046 5.806392721341777 L 138.15565355902942 5.67544037943654 L 138.56877242983037 5.537709626070172 L 138.97946513688152 5.393246398778917 L 139.3876235049777 5.242098636086602 L 139.79314109761512 5.084316229610779 L 140.1959132592964 4.919950975030783 L 140.5958371531327 4.749056522057979 L 140.99281179371687 4.571688323548675 L 141.38673807525856 4.387903583900088 L 141.77751879499078 4.1977612068687185 L 142.16505867187158 4.001321742949274 L 142.54926436062212 3.7986473364503506 L 142.9300444611559 3.5898016724007697 L 143.30730952346838 3.374849923417715 L 143.6809720480699 3.1538586966646256 L 144.0509464820557 2.9268959810231716 L 144.41714921091975 2.6940310945999224 L 144.77949854622798 2.455334632683998 L 145.13791470927694 2.2108784162675468 L 145.49231981087158 1.9607354412363156 L 145.8426378273632 1.7049798283325854 L 146.18879457309612 1.4436867739878152 L 146.5307176694152 1.1769325021171444 L 146.8683365103927 0.904794216962659 L 147.2015822254356 0.6273500570670385 L 147.53038763893747 0.3446790504539158 L 147.854687227141 0.05686107108583836 L 148.17441707237896 -0.2360232033343849 L 148.4895148148604 -0.5338923321586626 L 148.79991960217086 -0.836664151129554 L 149.105572036652 -1.144255810207078 L 149.40641412082684 -1.4565838098410904 L 149.70238920103344 -1.773564035648969 L 149.99344190942787 -2.0951117914627697 L 150.27951810451438 -2.421141830714803 L 150.56056481035802 -2.751568386134722 L 150.83653015462983 -3.086305197735538 L 151.1073633056333 -3.4252655390698745 L 151.37301440845502 -3.7683622417416016 L 151.6334345203782 -4.115507718161638 L 151.88857554569555 -4.466613982539999 L 152.13839017005105 -4.821592670109514 L 152.3828317944377 -5.180355054579552 L 152.6218544689734 -5.542812063820912 L 152.85541282657317 -5.9088742937857415 L 153.08346201663113 -6.278452020668679 L 153.3059576388232 -6.651455211317765 L 153.52285567713585 -7.0277935319056555 L 153.73411243422464 -7.407376354873726 L 153.93968446620158 -7.790112764163248 L 154.13952851794835 -8.175911558749597 L 154.33360145904882 -8.564681254496856 L 154.5218602204336 -8.956330084351409 L 154.7042617318254 -9.35076599689469 L 154.88076286007384 -9.747896653275976 L 155.05132034846736 -10.14762942254748 L 155.21589075710799 -10.549871375424768 L 155.37443040443574 -10.954529276496562 L 155.52689530998887 -11.361509574908688 L 155.6732411384875 -11.770718393547966 L 155.8134231453291 -12.18206151675239 L 155.94739612358586 -12.595444376574859 L 156.07511435259752 -13.010772037628586 L 156.19653154825372 -13.42794918054298 L 156.31160081506653 -13.84688008405975 L 156.42027460013512 -14.267468605799905 L 156.52250464911063 -14.689618161733272 L 156.61824196427443 -15.113231704383303 L 156.707436764848 -15.538211699801055 L 156.79003844966073 -15.964460103343697 L 156.86599556230684 -16.391878334294145 L 156.9352557589328 -16.8203672493603 L 156.9977657788033 -17.24982711509405 L 157.05347141780322 -17.680157579272244 L 157.10231750504357 -18.11125764128412 L 157.1442478827488 -18.54302562157213 L 157.17920538961383 -18.975359130175992 L 157.2071318478316 -19.40815503443264 L 157.22796805400313 -19.841309425888337 L 157.24165377415542 -20.274717586482808 L 157.2481277431056 -20.708273954069217 L 157.24732766842374 -21.141872087338548 L 157.23919023926038 -21.57540463022143 L 157.22365114032112 -22.008763275845915 L 157.20064507128333 -22.44183873013549 L 157.1701057719676 -22.874520675137553 L 157.1319660535906 -23.306697732179497 L 157.08615783644262 -23.73825742495651 L 157.03261219434754 -24.169086142663136 L 156.97125940627976 -24.599069103288617 L 156.9020290155265 -25.02809031720506 L 156.82484989679938 -25.45603255118681 L 156.73965033171248 -25.882777293009223 L 156.64635809305747 -26.308204716785742 L 156.54490053831844 -26.73219364921317 L 156.43520471287857 -27.15462153690681 L 156.317197463381 -27.575364415019333 L 156.1908055617114 -27.99429687735005 L 156.0559558400749 -28.41129204816455 L 155.91257533764116 -28.82622155595869 L 155.7605914592296 -29.23895550941454 L 155.59993214650078 -29.649362475811493 L 155.43052606211094 -30.057309462169513 L 155.25230278727193 -30.462661899417597 L 155.06519303313826 -30.865283629895192 L 154.86912886641832 -31.265036898509823 L 154.66404394957436 -31.661782347889186 L 154.4498737959364 -32.05537901788095 L 154.22655604000792 -32.445684349767774 L 153.99403072318682 -32.832554195578716 L 153.75224059506004 -33.215842832891326 L 153.5011314303555 -33.59540298553014 L 153.2406523615528 -33.971085850577886 L 152.97075622705606 -34.34274113212413 L 152.69139993472896 -34.71021708218327 L 152.40254484047185 -35.07336054921749 L 152.10415714139086 -35.432017034702724 L 151.79620828296817 -35.786030758173766 L 151.47867537948613 -36.135244731180165 L 151.15154164679214 -36.47950084057609 L 150.8147968463128 -36.818639941553826 L 150.46843773903615 -37.15250196081403 L 150.1124685479798 -37.4809260102423 L 149.7469014274545 -37.80375051143399 L 149.37175693721497 -38.12081333137543 L 148.98706451936567 -38.4319519295489 L 148.5928629756625 -38.737003516682904 L 148.18920094262236 -39.03580522531491 L 147.7761373616231 -39.32819429227436 L 147.35374194095596 -39.61400825312529 L 146.92209560657358 -39.89308514853406 L 146.4812909380768 -40.165263742446015 L 146.03143258629441 -40.430383751866046 L 145.57263766864398 -40.68828608794412 L 145.1050361383223 -40.93881310796514 L 144.6287711232619 -41.181808877736984 L 144.14399923071704 -41.41711944375939 L 143.6508908133055 -41.644593114442685 L 143.14963019234483 -41.864080749527574 L 142.64041583437879 -42.075436056740095 L 142.12346047690374 -42.278515894597554 L 141.59899119947252 -42.47318058016541 L 141.0672494365823 -42.659294200452464 L 140.52849092904114 -42.83672492602475 L 139.9829856108591 -43.0053453253186 L 139.43101742912134 -43.16503267804215 L 138.87288409477128 -43.31566928597548 L 138.3088967627611 -43.45714277941217 L 137.73937964060488 -43.58934641743362 L 137.1646695249975 -43.71217938017156 L 136.58511526682707 -43.82554705119683 L 136.0010771656042 -43.92936128817441 L 135.41292629505048 -44.0235406799464 L 134.821043762314 -44.10801078824759 L 134.22581990400792 -44.18270437232326 L 133.62765342298098 -44.24756159480353 L 133.0269504704169 -44.30253020729625 L 132.42412367850935 -44.347565714286084 L 131.8195911495603 -44.38263151407439 L 131.2137754078863 -44.407699015655965 L 130.60710232138507 -44.422747730608435 L 130 -44.42776533926063 L 129.39289767861496 -44.422747730608435 L 128.78622459211374 -44.407699015655965 L 128.1804088504397 -44.38263151407439 L 127.5758763214907 -44.347565714286084 L 126.97304952958315 -44.30253020729625 L 126.37234657701902 -44.24756159480353 L 125.7741800959921 -44.18270437232326 L 125.17895623768602 -44.10801078824759 L 124.58707370494956 -44.0235406799464 L 123.99892283439583 -43.92936128817441 L 123.41488473317295 -43.82554705119683 L 122.83533047500251 -43.71217938017156 L 122.26062035939516 -43.58934641743364 L 121.69110323723892 -43.45714277941217 L 121.12711590522872 -43.31566928597548 L 120.5689825708787 -43.16503267804215 L 120.01701438914093 -43.0053453253186 L 119.4715090709589 -42.83672492602476 L 118.93275056341773 -42.659294200452464 L 118.40100880052748 -42.473180580165426 L 117.87653952309624 -42.278515894597554 L 117.35958416562121 -42.075436056740095 L 116.85036980765521 -41.864080749527574 L 116.34910918669455 -41.644593114442685 L 115.85600076928299 -41.41711944375939 L 115.37122887673812 -41.18180887773696 L 114.89496386167774 -40.938813107965146 L 114.42736233135602 -40.68828608794412 L 113.96856741370561 -40.430383751866046 L 113.5187090619232 -40.165263742446015 L 113.07790439342645 -39.89308514853408 L 112.64625805904404 -39.6140082531253 L 112.22386263837691 -39.32819429227436 L 111.81079905737768 -39.035805225314924 L 111.40713702433749 -38.737003516682904 L 111.01293548063435 -38.43195192954891 L 110.62824306278505 -38.120813331375416 L 110.25309857254553 -37.80375051143399 L 109.88753145202023 -37.4809260102423 L 109.53156226096387 -37.152501960814035 L 109.18520315368724 -36.818639941553826 L 108.8484583532079 -36.47950084057609 L 108.5213246205139 -36.13524473118018 L 108.20379171703185 -35.78603075817376 L 107.89584285860917 -35.43201703470273 L 107.59745515952818 -35.07336054921748 L 107.30860006527104 -34.71021708218327 L 107.02924377294397 -34.34274113212413 L 106.75934763844722 -33.971085850577886 L 106.4988685696445 -33.59540298553015 L 106.24775940494 -33.21584283289133 L 106.00596927681319 -32.83255419557871 L 105.77344395999211 -32.445684349767774 L 105.5501262040636 -32.05537901788096 L 105.33595605042564 -31.661782347889197 L 105.13087113358172 -31.26503689850982 L 104.93480696686176 -30.865283629895192 L 104.74769721272808 -30.462661899417597 L 104.56947393788907 -30.057309462169513 L 104.40006785349925 -29.649362475811504 L 104.2394085407704 -29.238955509414538 L 104.08742466235884 -28.82622155595869 L 103.94404415992514 -28.41129204816456 L 103.80919443828863 -27.994296877350052 L 103.68280253661901 -27.575364415019333 L 103.56479528712144 -27.15462153690681 L 103.45509946168157 -26.73219364921317 L 103.35364190694253 -26.30820471678575 L 103.26034966828755 -25.882777293009234 L 103.17515010320064 -25.456032551186805 L 103.09797098447352 -25.02809031720506 L 103.02874059372026 -24.599069103288628 L 102.96738780565246 -24.169086142663154 L 102.91384216355738 -23.738257424956505 L 102.86803394640943 -23.30669773217949 L 102.82989422803244 -22.874520675137553 L 102.7993549287167 -22.441838730135494 L 102.7763488596789 -22.008763275845926 L 102.76080976073963 -21.575404630221424 L 102.75267233157629 -21.141872087338548 L 102.7518722568944 -20.708273954069224 L 102.7583462258446 -20.274717586482815 L 102.7720319459969 -19.841309425888333 L 102.79286815216844 -19.40815503443263 L 102.82079461038619 -18.975359130175992 L 102.85575211725121 -18.543025621572138 L 102.89768249495644 -18.11125764128413 L 102.9465285821968 -17.68015757927224 L 103.00223422119672 -17.24982711509405 L 103.0647442410672 -16.820367249360302 L 103.13400443769318 -16.391878334294155 L 103.20996155033929 -15.964460103343692 L 103.29256323515199 -15.538211699801055 L 103.3817580357256 -15.113231704383303 L 103.47749535088937 -14.689618161733275 L 103.5797253998649 -14.267468605799916 L 103.68839918493349 -13.846880084059746 L 103.80346845174631 -13.42794918054298 L 103.9248856474025 -13.010772037628591 L 104.05260387641414 -12.59544437657487 L 104.18657685467093 -12.182061516752384 L 104.32675886151252 -11.770718393547968 L 104.47310469001114 -11.361509574908688 L 104.62556959556429 -10.954529276496565 L 104.78410924289203 -10.54987137542478 L 104.94867965153267 -10.147629422547476 L 105.11923713992618 -9.747896653275976 L 105.2957382681746 -9.350765996894697 L 105.47813977956638 -8.956330084351418 L 105.66639854095119 -8.56468125449685 L 105.86047148205168 -8.175911558749597 L 106.06031553379842 -7.790112764163248 L 106.26588756577536 -7.40737635487373 L 106.47714432286415 -7.027793531905666 L 106.6940423611768 -6.651455211317762 L 106.91653798336885 -6.278452020668681 L 107.14458717342686 -5.908874293785746 L 107.37814553102662 -5.5428120638209215 L 107.61716820556234 -5.18035505457955 L 107.86160982994897 -4.821592670109514 L 108.11142445430447 -4.466613982539999 L 108.36656547962184 -4.115507718161642 L 108.62698559154501 -3.7683622417416136 L 108.89263669436671 -3.4252655390698683 L 109.1634698453702 -3.0863051977355402 L 109.43943518964198 -2.751568386134729 L 109.7204818954856 -2.421141830714811 L 110.00655809057217 -2.0951117914627657 L 110.29761079896659 -1.773564035648969 L 110.59358587917316 -1.4565838098410946 L 110.894427963348 -1.1442558102070821 L 111.20008039782913 -0.8366641511295662 L 111.51048518513961 -0.5338923321586586 L 111.82558292762107 -0.2360232033343849 L 112.14531277285901 0.056861071085836316 L 112.46961236106256 0.3446790504539076 L 112.79841777456441 0.6273500570670446 L 113.13166348960732 0.904794216962659 L 113.46928233058483 1.1769325021171444 L 113.81120542690391 1.443686773987811 L 114.15736217263681 1.7049798283325774 L 114.50768018912845 1.9607354412363194 L 114.86208529072306 2.2108784162675468 L 115.220501453772 2.455334632683994 L 115.58285078908025 2.694031094599914 L 115.94905351794434 2.926895981023176 L 116.31902795193012 3.1538586966646256 L 116.69269047653164 3.374849923417715 L 117.06995553884413 3.5898016724007653 L 117.4507356393779 3.7986473364503426 L 117.83494132812844 4.001321742949274 L 118.22248120500923 4.197761206868715 L 118.61326192474147 4.387903583900083 L 119.00718820628315 4.571688323548667 L 119.40416284686734 4.749056522057979 L 119.80408674070364 4.919950975030787 L 120.20685890238488 5.084316229610773 L 120.6123764950223 5.242098636086599 L 121.0205348631185 5.393246398778912 L 121.43122757016964 5.537709626070172 L 121.84434644097061 5.67544037943654 L 122.25978160857954 5.806392721341777 L 122.67742156587931 5.930522761853627 L 123.09715322165503 6.047788703844947 L 123.51886196108877 6.158150886643794 L 123.94243171055237 6.261571827999581 L 124.36774500656254 6.35801626423564 L 124.79468306874246 6.447451188462697 L 125.2231258766169 6.529845886732259 L 125.65295225005039 6.605171972014358 L 126.08403993312056 6.673403415889735 L 126.51626568120287 6.734516577853062 L 126.94950535102778 6.788490232130846 L 127.38363399345644 6.835305591924958 L 127.81852594870861 6.8749463310009675 L 128.2540549437637 6.907398602548513 L 128.69009419164476 6.9326510552502745 L 129.12651649228744 6.950694846504673 L 129.56319433468542 6.961523652757519 L 130 6.9651336769071115 " />

            <polyline class="marker" points="-1,-1,-1,1,1,1,1,-1,-1,-1" transform="translate(130,-18.731315831176754),scale(1)" />
            <text class="marker_label" x="130" y="-18.731315831176754" dx="0" dy="-3" text-anchor="middle" dominant-baseline="auto">FORESAIL-1</text>

            <polyline class="groundstation" points="-1,-1,-1,1,1,1,1,-1,-1,-1" transform="translate(24,-60),scale(1)" />
            <text class="groundstation_label" dx="24" dy="-63" text-anchor="middle">OH2AGS</text>
        </svg>

    </div>
</template>

<script>

const D2R = Math.PI / 180;
const R2D = 180 / Math.PI;

export default {
    components: {},
    inject: ['openmct', 'domainObject', 'path'],
    props: [
        options: {
            type: Object,
        },
        renderEngine: {
            type: String,
            default: 'svg',
        }
    ],
    mounted() {
        //this.composition.on('add', this.addedToComposition);
        //this.composition.on('remove', this.removeTelemetryObject);

        //this.openmct.time.on('timeSystem', this.setTimeSystem);
    },
    unmounted() {

    },
    methods: {
        calculateFootprint(lat, lon, elev) {
            // https://github.com/csete/gpredict/blob/master/src/gtk-sat-map.c#L1319

            let m = D2R * 0 // Horizon
            let r0 = 6.378135e3 // Earth radius km
            let alt = elev + r0

            let x0 = r0 * r0 / alt
            let phi = Math.acos(x0 * Math.cos(m) / r0) - m
            let y0 = r0 * Math.sin(phi)

            // Is north or south pole covered?
            let high_latitude = Math.abs(D2R * lat) + phi > Math.PI/2

            // Precalculate sin/cos
            let clat = Math.cos(D2R * lat)
            let slat = Math.sin(D2R * lat)
            let clon = Math.cos(D2R * lon)
            let slon = Math.sin(D2R * lon)

            let prev_lon = 0
            let path = "";
            let path2 = "";

            for (let i = 0; i <= 360; i += 1)
            {
                // Point on the circle
                let vert_x = x0
                let vert_y = y0 * Math.sin(D2R * i)
                let vert_z = y0 * Math.cos(D2R * i)

                // Rotate Y-axis by latitude
                let vert_xx = clat * vert_x - slat * vert_z
                let vert_yy = vert_y
                let vert_zz = slat * vert_x + clat * vert_z

                // Rotate around Z-axis by longitude
                let vertt_x = clon * vert_xx - slon * vert_yy
                let vertt_y = slon * vert_xx + clon * vert_yy
                let vertt_z = vert_zz

                // Transform back to angles on the sphere (lat/lon)
                let vert_lon = R2D * Math.atan2(vertt_y, vertt_x)
                let vert_lat = R2D * Math.asin(vertt_z / r0)

                // Insert point to path object
                if (i == 0) {
                    // First point on the path so use a move command
                    path = `M ${vert_lon} ${vert_lat} `
                }
                else if (Math.abs(prev_lon - vert_lon) > 100) {
                    // The polygon just wrapped around the longitudal edge.

                    // Does polygon wrap around the North/South pole.
                    if (high_latitude) {
                        if (vert_lat < 0) {
                            // Add extra points to cover the North pole.
                            path += `L 180 ${vert_lat} L 180 -90 L -180 -905 L -180 ${vert_lat} `
                        }
                        else {
                            // Add extra points to cover the South pole.
                            path += `L -180 ${vert_lat} L -180 90 L 180 90 L 180 ${vert_lat} `
                        }
                    }
                    else {
                        if (path2 === "") {
                            // Add vertex to stretch the polygon to the edge of the map
                            path += `L ${180 * Math.sign(prev_lon)} ${vert_lat} `
                            // Swap actively drawn polygon
                            path2 = path
                            // Start a new polygon with a vertext to stretch the polygon to edge
                            path = `M ${180 * Math.sign(vert_lon)} ${vert_lat} `
                        }
                        else {
                            // Add vertex to stretch the polygon to the edge of the map
                            path += `L ${180 * Math.sign(prev_lon)} ${vert_lat} `
                            // Swap actively drawn polygon
                            var tmp = path; path = path2; path2 = tmp;
                            // Start a new polygon with a vertext to stretch the polygon to edge
                            path += `L ${180 * Math.sign(vert_lon)} ${vert_lat} `
                        }
                    }

                }

                // Add point to the actively drawn path
                path += `L ${vert_lon} ${vert_lat} `
                prev_lon = vert_lon
            }

            return path + path2
        },
        drawTerminator(sun_lat, sun_lon) {
            // https://github.com/csete/gpredict/blob/master/src/gtk-sat-map.c#L2650
            sun_lat *= D2R;
            sun_lon *= D2R;

            sun_lon
            // In X-Y-Z ECEF
            let sx = Math.cos(sun_lat) * Math.cos(sun_lon)
            let sy = Math.cos(sun_lat) * Math.sin(-sun_lon)
            let sz = Math.sin(sun_lat)

            let line = [ ]
            line.push(-180, Math.sign(sz) * -90)

            for (let lon = -180; lon <= 180; lon++)
            {
                // Vector normal to plane containing a line of longitude
                let lx = Math.cos((Math.PI/180) * (lon + Math.sign(sz) * 90))
                let ly = Math.sin((Math.PI/180) * (lon + Math.sign(sz) * 90))

                // Vector cross-product of (lx,ly,lz) and sun vector.
                let rx =  ly * sz /*- lz * sy*/
                let ry = /*lz * sx*/ - lx * sz
                let rz = -lx * sy - ly * sx

                let mag = Math.sqrt(rx * rx + ry * ry + rz * rz)
                let lat = (180/Math.PI) * Math.asin(rz / mag)

                line.push(lon, lat)
            }

            // Last point of the polygon
            line.push(180, Math.sign(sz) * -90)
            return line
        },
        setLabelPosition(label, lat, lon) {
            let margin = 10;
            let padding = 3;

            label.setAttributeNS(null, 'x', lon)
            label.setAttributeNS(null, 'y', lat)

            if (lon < -180 + margin) {
                // Left
                label.setAttributeNS(null, 'dx', padding)
                label.setAttributeNS(null, 'dy', 0)
                label.setAttributeNS(null, 'text-anchor', 'start')
                label.setAttributeNS(null, 'dominant-baseline', 'middle')
            }
            else if (lon > 180 - margin) {
                // Right
                label.setAttributeNS(null, 'dx', -padding)
                label.setAttributeNS(null, 'dy', 0)
                label.setAttributeNS(null, 'text-anchor', 'end')
                label.setAttributeNS(null, 'dominant-baseline', 'middle')
            }
            else if (lat < -90 + margin) {
                // Top-center
                label.setAttributeNS(null, 'dx', 0)
                label.setAttributeNS(null, 'dy', padding)
                label.setAttributeNS(null, 'text-anchor', 'middle')
                label.setAttributeNS(null, 'dominant-baseline', 'hanging')
            }
            else {
                // Bottom-center
                label.setAttributeNS(null, 'dx', 0)
                label.setAttributeNS(null, 'dy', -padding)
                label.setAttributeNS(null, 'text-anchor', 'middle')
                label.setAttributeNS(null, 'dominant-baseline', 'auto')
            }
        },
        newLabel(text, class) {
            var groundstation = document.createElementNS(ns, 'polyline')
            groundstation.setAttributeNS(null, 'class', 'groundstation')
            groundstation.setAttributeNS(null, 'points', [ -1, -1, -1, 1, 1, 1, 1, -1, -1, -1 ])
            groundstation.setAttributeNS(null, 'transform', ['translate(24,-60)', 'scale(1)'])
            svg.appendChild(groundstation)

            var groundstation_label = document.createElementNS(ns, 'text')
            groundstation_label.setAttributeNS(null, 'class', 'groundstation_label')
            groundstation_label.setAttributeNS(null, 'dx', 24)
            groundstation_label.setAttributeNS(null, 'dy', -60 - 3)
            groundstation_label.setAttributeNS(null, 'text-anchor', 'middle')
            groundstation_label.innerHTML = "OH2AGS"
            svg.appendChild(groundstation_label)

        },
    }
};

// "static/world.topo.bathy.200407.3x2700x1350.jpg"


</script>

<style scoped>


</style>
